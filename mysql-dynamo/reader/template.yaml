AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Description: Antipode Lambda - MySQL<>Dynamo - Reader
Resources:
  AntipodeLambdaMysqlDynamoReader:
    Type: AWS::Serverless::Function
    Properties:
      Handler: reader.lambda_handler
      Runtime: python3.7
      Description: 'Antipode Lambda - MySQL<>Dynamo - Reader'
      MemorySize: 128
      Timeout: 900
      Role: arn:aws:iam::641424397462:role/antipode-lambda-admin
      Environment:
        Variables:
          MYSQL_HOST: antipode-lambda-us.cluster-ro-cdwqaw2esdz0.us-east-1.rds.amazonaws.com
          MYSQL_PORT: 3306
          MYSQL_USER: antipode
          MYSQL_PASSWORD: antipode
          MYSQL_DB: antipode
          MYSQL_POST_TABLE_NAME: blobs
          MYSQL_NOTIFICATIONS_TABLE_NAME: keyvalue
          DYNAMO_POST_TABLE_NAME: blobs
          DYNAMO_NOTIFICATIONS_TABLE_NAME: keyvalue
          SQS_EVAL_QUEUE_URL: https://sqs.us-east-1.amazonaws.com/641424397462/antipode-lambda-eval
      Events:
        DynamoDbEvent:
          Type: DynamoDB
          Properties:
            BatchSize: 1
            StartingPosition: LATEST
            Stream: arn:aws:dynamodb:us-east-1:641424397462:table/keyvalue/stream/2020-06-15T14:43:13.249